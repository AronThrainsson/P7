<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>BabyFoodCheck</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='global.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='index.css') }}">
</head>
<body>

<!--Navbar section here-->
<nav class="navbar">
    <div class="navbar_container">
            <a href="index.html"><img src="../static/images/babyfoodcheck_logo.png" alt="BabyFoodCheck Logo"></a> 
        <div class="navbar_toggle" id="mobile-menu">
            <span class="bar"></span><span sclass="bar"></span><span class="bar"></span>
        </div>
        <ul class="navbar_menu">
          <li class="navbar_item"><a href="/common" class="navbar_links">Most common toxins</a></li>
          <li class="navbar_item"><a href="/expert" class="navbar_links">Expert advice</a></li>
          <li class="navbar_item"><a href="/general" class="navbar_links">General advice</a></li>
        </ul>
    </div>
</nav>

<!-- Hero Section-->
<section class="services">
  <p><strong>Trusted by experts</strong>
    <br>BabyFoodCheck has partnered with health professionals to 
    <br>ensure we provide you with the most accurate and reliable data.
  </p>
      <div class="search-container">
        <!-- form get -->
      <form id="search-form">
          <input type="text" id="keyword" name="query" placeholder="Search" required>
      </form>
    <div class="under_boxes">
      <header>Most searched:</header>
      <div class="buttons">
          <button class="search-button" data-query="Once Upon a Farm">Once Upon a Farm</button>
          <button class="search-button" data-query="Baby Gourmet">Baby Gourmet</button>
          <button class="search-button" data-query="Little Spoon">Little Spoon</button>
      </div>
    </div>
</section>

<!-- Footer Section -->
<div class="footer_container">
  <div class="footer_left">
    <div class="left_footer">
      <p class="website_rights">© BabyFoodCheck 2024. <br> All rights reserved</p>
    </div>
    <div class="left_footer_img">
      <img src="../static/images/cleanlabel.png" alt="Clean Label Logo">
      <p class="footer_img_text">Partnered with the <br> Clean Label Project</p>
    </div>
  </div>
  <div class="footer_link--wrapper">
    <div class="footer_link--items">
      <h3>Help</h3>
      <a href="/">FAQ</a>
      <a href="/">Contact</a>
    </div>
    <div class="footer_link--items">
      <h3>About</h3>
      <a href="/">About us</a>
    </div>
  </div>
</div>  

<script>
  // Håndter form-submission
  document.getElementById('searchForm').addEventListener('submit', async (event) => {
      event.preventDefault();

      // Hent søgeterm fra inputfeltet
      const keyword = document.getElementById('keyword').value;

      // Send forespørgsel til Flask-backend
      const response = await fetch(`/search?keyword=${encodeURIComponent(keyword)}`);
      const results = await response.json();

      // Vis resultaterne
      const resultList = document.getElementById('resultList');
      resultList.innerHTML = ''; // Ryd tidligere resultater
      results.forEach(result => {
          const li = document.createElement('li');
          li.innerHTML = `
              <strong>Brand:</strong> ${result.brand_name}, 
              <strong>Product:</strong> ${result.product_name}, 
              <strong>Store:</strong> ${result.store_name}<br>
              <strong>Toxic Metals:</strong> ${result.toxic_metals || 'None'}, 
              <strong>Pesticides:</strong> ${result.pesticides || 'None'}, 
              <strong>Microplastics:</strong> ${result.microplastics || 'None'}
          `;
          resultList.appendChild(li);
      });
  });
  </script>
</body>
</html>