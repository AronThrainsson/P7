{% extends 'base.html' %}
{% block content %}

<!-- Search and Filter Container under navbar -->
<div class="search-filter-container">
    <!-- Search Form -->
    <form action="{{ url_for('search') }}" method="GET" class="search-form">
      <input type="text" id="keyword" name="query" placeholder="Search..." value="{{ request.args.get('query', '') }}" class="search-input" />
      <button type="submit" class="s-button">Search</button>
    </form>     

    <!-- Filter Container -->
    <div class="filter-container1">
        <form action="{{ url_for('search') }}" method="GET" id="filter-form">
            <header>Filter by:</header>
    
            <!-- Store Dropdown Filter -->
            <div class="filter-dropdown1">
                <button type="button" class="dropdown-btn1">Store ▼</button>
                <div class="dropdown-content1">
                    <label><input type="checkbox" name="store" value="target"> Target</label>
                    <label><input type="checkbox" name="store" value="walmart"> Walmart</label>
                    <label><input type="checkbox" name="store" value="costco"> Costco</label>
                    <label><input type="checkbox" name="store" value="wholefoods"> Whole Foods</label>
                    <label><input type="checkbox" name="store" value="kroger"> Kroger</label>
                    <label><input type="checkbox" name="store" value="albertsons"> Albertsons</label>
                </div>
            </div>
    
            <!-- Product Dropdown Filter -->
            <div class="filter-dropdown1">
                <button type="button" class="dropdown-btn1">Product ▼</button>
                <div class="dropdown-content1">
                    <label><input type="checkbox" name="product" value="organic"> Organic</label>
                    <label><input type="checkbox" name="product" value="puree"> Puree</label>
                    <label><input type="checkbox" name="product" value="moss"> Moss</label>
                    <label><input type="checkbox" name="product" value="toxic"> Toxic babyfood</label>
                    <label><input type="checkbox" name="product" value="snacks"> Snacks</label>
                </div>
            </div>
        </form>
    </div>
</div>    

<!-- Results container -->
<div class="results-container">
    <h2>Search Results for "{{ query }}"</h2>
    {% if message %}
        <p>{{ message }}</p>
    {% else %}
        <ul>
            {% for product_group in products %}
                {% for product in product_group %}
                    <li>
                        <a href="{{ url_for('product_details', product_name=product['product']) }}" class="product-link">
                            <div class="product-item">
                                {% if product.image %}
                                    <img src="{{ url_for('static', filename=product['image']) }}" alt="{{ product['product'] }}" class="product-image">
                                {% endif %}
                                <div class="product-text">
                                    <strong>{{ product ['brand'] }}:</strong>
                                    <span>{{ product['product'] }}</span>
                                </div>
                            </div>
                        </a>
                    {% endfor %}
                </li>
            {% endfor %}
        </ul>
    {% endif %}
</div>

{% endblock %}